# tests/unit/test_models_attendance.py
from datetime import date, datetime, time
from app.models import attendance
import pytest

def test_parse_date_none_and_iso():
    assert attendance._parse_date(None) is None
    d = attendance._parse_date("2023-10-05")
    assert isinstance(d, date)
    assert d == date(2023,10,5)

def test_parse_datetime_and_time_slot():
    dt = attendance._parse_datetime("2023-10-05T14:30:00")
    assert isinstance(dt, datetime)
    t = attendance._parse_time_string("14:30")
    assert isinstance(t, time)
    # test slot conversion helpers
    start, end = attendance._slot_to_datetimes("14:00-15:00", date(2023,10,5))
    assert isinstance(start, datetime) and isinstance(end, datetime)
    # and back
    slot = attendance._datetimes_to_slot(start, end)
    assert "-" in slot

def test_attendance_repr_and_str():
    # create a simple Attendance object with minimal attributes
    att = attendance.Attendance(id=1, member_id=2, member_name="A", trainer_id=3, trainer_name="T",
                                date=date(2023,10,5), time_slot="14:00-15:00", status="present")
    s = str(att)
    assert "Member" in s or "A" in s
    assert "Status" in s
