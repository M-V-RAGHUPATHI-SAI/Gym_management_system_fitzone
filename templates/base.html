<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}FitZone Gym Management{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#059669',
                        accent: '#ea580c',
                        danger: '#dc2626',
                        warning: '#d97706',
                        success: '#16a34a'
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    {% if session.user_id %}
    <nav class="bg-white shadow-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center space-x-8">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-primary">
                            <i class="fas fa-dumbbell mr-2"></i>FitZone
                        </h1>
                    </div>
                    
                    <!-- Navigation Links -->
                    <div class="hidden md:flex space-x-6">
                        {% if session.role == 'admin' %}
                            <a href="{{ url_for('admin.dashboard') }}" class="nav-link">Dashboard</a>
                            <a href="{{ url_for('admin.members') }}" class="nav-link">Members</a>
                            <a href="{{ url_for('admin.trainers') }}" class="nav-link">Trainers</a>
                            <a href="{{ url_for('admin.membership_plans') }}" class="nav-link">Plans</a>
                            <a href="{{ url_for('admin.payments') }}" class="nav-link">Payments</a>
                            <a href="{{ url_for('admin.equipment_list') }}" class="nav-link">Equipment</a>
                            <a href="{{ url_for('admin.reports') }}" class="nav-link">Reports</a>
                        {% elif session.role == 'member' %}
    <a href="{{ url_for('member.dashboard') }}" class="nav-link">Dashboard</a>
    <a href="{{ url_for('member.profile') }}" class="nav-link">Profile</a>
    <a href="{{ url_for('member.workouts') }}" class="nav-link">Workouts</a>
    <a href="{{ url_for('member.attendance') }}" class="nav-link">Attendance</a>
    <a href="{{ url_for('member.payments') }}" class="nav-link">Payments</a>
{% elif session.role == 'trainer' %}
    <a href="{{ url_for('trainer_routes.dashboard') }}" class="nav-link">Dashboard</a>
    <a href="{{ url_for('trainer_routes.clients') }}" class="nav-link">My Clients</a>
    <a href="{{ url_for('trainer_routes.schedule') }}" class="nav-link">Schedule</a>
{% endif %}

                    </div>
                </div>

                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-700">{{ session.full_name }}</span>
                    <span class="px-2 py-1 text-xs bg-primary text-white rounded-full">{{ session.role|title }}</span>
                    <a href="{{ url_for('auth.change_password_form') }}" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-key"></i>
                    </a>
                    <a href="{{ url_for('auth.logout') }}" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    {% endif %}

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} mb-4">
                        <div class="flex items-center justify-between">
                            <span>{{ message }}</span>
                            <button onclick="this.parentElement.parentElement.remove()" class="text-current opacity-70 hover:opacity-100">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p>&copy; {{ date.today().year }} FitZone Gym Management. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <style>
        .nav-link {
            @apply text-gray-600 hover:text-primary transition-colors duration-200 font-medium;
        }
        
        .alert {
            @apply px-4 py-3 rounded-lg border text-sm;
        }
        
        .alert-success {
            @apply bg-green-50 border-green-200 text-green-800;
        }
        
        .alert-danger {
            @apply bg-red-50 border-red-200 text-red-800;
        }
        
        .alert-warning {
            @apply bg-yellow-50 border-yellow-200 text-yellow-800;
        }
        
        .alert-info {
            @apply bg-blue-50 border-blue-200 text-blue-800;
        }
        
        .btn {
            @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
        }
        
        .btn-primary {
            @apply bg-primary text-white hover:bg-blue-700 focus:ring-primary;
        }
        
        .btn-secondary {
            @apply bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500;
        }
        
        .btn-success {
            @apply bg-success text-white hover:bg-green-700 focus:ring-success;
        }
        
        .btn-danger {
            @apply bg-danger text-white hover:bg-red-700 focus:ring-danger;
        }
        
        .card {
            @apply bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden;
        }
        
        .card-header {
            @apply px-6 py-4 border-b border-gray-200 bg-gray-50;
        }
        
        .card-body {
            @apply p-6;
        }
        
        .form-group {
            @apply mb-4;
        }
        
        .form-label {
            @apply block text-sm font-medium text-gray-700 mb-2;
        }
        
        .form-control {
            @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors;
        }
        
        .table {
            @apply w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm;
        }
        
        .table thead {
            @apply bg-gray-50;
        }
        
        .table th {
            @apply px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200;
        }
        
        .table td {
            @apply px-6 py-4 text-sm text-gray-900 border-b border-gray-200;
        }
        
        .table tbody tr:hover {
            @apply bg-gray-50;
        }
        
        .stat-card {
            @apply bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-shadow;
        }
        
        .stat-value {
            @apply text-3xl font-bold text-gray-900;
        }
        
        .stat-label {
            @apply text-sm text-gray-500 mt-1;
        }
        
        .badge {
            @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
        }
        
        .badge-success {
            @apply bg-green-100 text-green-800;
        }
        
        .badge-warning {
            @apply bg-yellow-100 text-yellow-800;
        }
        
        .badge-danger {
            @apply bg-red-100 text-red-800;
        }
        
        .badge-info {
            @apply bg-blue-100 text-blue-800;
        }
    </style>

    <script>
        // Auto-hide flash messages after 5 seconds
        setTimeout(() => {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            });
        }, 5000);
    </script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>