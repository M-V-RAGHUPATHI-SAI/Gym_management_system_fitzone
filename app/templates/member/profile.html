{% extends "base.html" %}
{% block title %}My Profile - Member{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto py-10 px-4">

    <!-- Page Header -->
    <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-blue-600 flex items-center justify-center gap-2">
            <i class="fas fa-user-circle"></i>
            My Profile
        </h1>
        <p class="text-gray-600 mt-2">Manage and update your personal and fitness information</p>
    </div>

    <!-- Profile Overview & Form -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Left Card - Profile Overview -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition duration-300">
            <div class="p-8 text-center">
                <div class="relative w-28 h-28 mx-auto mb-5">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full"></div>
                    <i class="fas fa-user text-blue-600 text-4xl absolute inset-0 flex items-center justify-center"></i>
                </div>
                <h2 class="text-2xl font-semibold text-gray-900 mb-1">{{ user.full_name }}</h2>
                <p class="text-gray-500 text-sm mb-3">{{ user.email }}</p>

                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium 
                    {% if member.status == 'active' %}
                        bg-green-100 text-green-700
                    {% else %}
                        bg-red-100 text-red-700
                    {% endif %}">
                    <i class="fas fa-check-circle mr-1"></i>{{ member.status|title }} Member
                </span>

                <hr class="my-6 border-gray-200">
                <div class="text-left space-y-3 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-500">Phone:</span>
                        <span class="font-medium">{{ user.phone or 'N/A' }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">Height:</span>
                        <span class="font-medium">{{ member.height or 'N/A' }} cm</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">Weight:</span>
                        <span class="font-medium">{{ member.weight or 'N/A' }} kg</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Card - Editable Profile Form -->
        <div class="lg:col-span-2">
            <div class="bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition duration-300">
                <div class="border-b px-6 py-4 flex items-center gap-2">
                    <i class="fas fa-edit text-blue-600"></i>
                    <h3 class="text-xl font-semibold text-gray-900">Edit Profile Information</h3>
                </div>

                <div class="p-6">
                    <form method="POST" action="{{ url_for('member.update_profile') }}" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Full Name</label>
                                <input type="text" name="full_name" value="{{ user.full_name }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Email</label>
                                <input type="email" name="email" value="{{ user.email }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Phone</label>
                                <input type="tel" name="phone" value="{{ user.phone }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm" required>
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Emergency Contact</label>
                                <input type="text" name="emergency_contact" value="{{ member.emergency_contact or '' }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Emergency Phone</label>
                                <input type="tel" name="emergency_phone" value="{{ member.emergency_phone or '' }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Weight (kg)</label>
                                <input type="number" step="0.1" name="weight" value="{{ member.weight or '' }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">
                            </div>

                            <div>
                                <label class="block text-gray-700 font-medium mb-1">Height (cm)</label>
                                <input type="number" step="0.1" name="height" value="{{ member.height or '' }}"
                                       class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">
                            </div>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-1">Medical Conditions</label>
                            <textarea name="medical_conditions" rows="3"
                                      class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">{{ member.medical_conditions or '' }}</textarea>
                        </div>

                        <div>
                            <label class="block text-gray-700 font-medium mb-1">Fitness Goals</label>
                            <textarea name="fitness_goals" rows="3"
                                      class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm">{{ member.fitness_goals or '' }}</textarea>
                        </div>

                        <div class="flex gap-4 pt-2">
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-lg font-medium shadow-md transition">
                                <i class="fas fa-save mr-2"></i>Save Changes
                            </button>
                            <a href="{{ url_for('member.dashboard') }}" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-5 py-2.5 rounded-lg font-medium shadow-md transition">
                                <i class="fas fa-times mr-2"></i>Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Membership Details -->
    <div class="bg-white mt-10 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition duration-300">
        <div class="border-b px-6 py-4 flex items-center gap-2">
            <i class="fas fa-id-card text-blue-600"></i>
            <h3 class="text-xl font-semibold text-gray-900">Membership Details</h3>
        </div>
        <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6 text-gray-800">
            <div>
                <label class="text-sm text-gray-500 flex items-center gap-2">
                    <i class="fas fa-dumbbell text-blue-600"></i> Plan
                </label>
                <div class="font-medium">{{ member.plan_name or 'No Plan Assigned' }}</div>
            </div>
            <div>
                <label class="text-sm text-gray-500 flex items-center gap-2">
                    <i class="fas fa-calendar-day text-blue-600"></i> Start Date
                </label>
                <div class="font-medium">
                    {{ member.membership_start_date.strftime('%B %d, %Y') if member.membership_start_date else 'N/A' }}
                </div>
            </div>
            <div>
                <label class="text-sm text-gray-500 flex items-center gap-2">
                    <i class="fas fa-calendar-check text-blue-600"></i> End Date
                </label>
                <div class="font-medium">
                    {{ member.membership_end_date.strftime('%B %d, %Y') if member.membership_end_date else 'N/A' }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
